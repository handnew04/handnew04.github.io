<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="A_XdUx0_-T0KobQbEBvPZ5ffTJlRJqNYr2engr5rpjI"><meta name=description content="dev step by step"><meta name=generator content="Hugo 0.79.1"><title>[Android] MVVM ì˜ˆì œë„ ë‹¤ 1:1ì¸ë° MVPë‘ ì°¨ì´ê°€ ë­˜ê¹Œ? &#183; Handnew's blog</title><link rel="shortcut icon" href=https://handnew04.github.io/images/favicon.ico><link rel=stylesheet href=https://handnew04.github.io/css/style.css><link rel=stylesheet href=https://handnew04.github.io/css/monosocialiconsfont.css><link href=https://handnew04.github.io/index.xml rel=alternate type=application/rss+xml title="Handnew's blog"><link rel=stylesheet href=https://handnew04.github.io/css/rainbow.css><script src=https://handnew04.github.io/css/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script data-ad-client=ca-pub-2907304965705395 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><nav class=main-nav><a href=https://handnew04.github.io/><span class=arrow>â†</span>Home</a>
<a href=https://github.com/handnew04 target=_blank>About</a>
<a href=https://handnew04.github.io/posts>Archive</a>
<a href=https://handnew04.github.io/tags>Tags</a>
<a href=https://handnew04.github.io/search>Search</a></nav><section id=wrapper class=post><article><header><h1>[Android] MVVM ì˜ˆì œë„ ë‹¤ 1:1ì¸ë° MVPë‘ ì°¨ì´ê°€ ë­˜ê¹Œ?</h1><h2 class=headline>Nov 24, 2020 23:22
Â· 3132 words
Â· 7 minute read
<span class=tags><a href=https://handnew04.github.io/tags/mvvm>MVVM</a>
<a href=https://handnew04.github.io/tags/mvp>MVP</a>
<a href=https://handnew04.github.io/tags/pattern>Pattern</a>
<a href=https://handnew04.github.io/tags/android>Android</a></span></h2></header><div id=toc><nav id=TableOfContents><ul><li><a href=#mvvmì„-ì‚¬ìš©í•˜ëŠ”-ì´ìœ >MVVMì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?</a><ul><li></li></ul></li><li><a href=#mvp>MVP</a></li><li><a href=#mvvm>MVVM</a><ul><li></li></ul></li></ul></nav></div><section id=post-body><h2 id=mvvmì„-ì‚¬ìš©í•˜ëŠ”-ì´ìœ >MVVMì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?</h2><p><a href=https://github.com/devHyeon0312>devHyeon</a>ë‹˜ì˜ íŠ¹ê°•(?) í†µí•´ ì•Œê²Œëœ MVVMì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ (MVPì™€ MVVMì˜ ì°¨ì´ì )ì— ëŒ€í•œ ì •ë¦¬.<br>ì§ì ‘ ì‘ì„±í•˜ì‹  ìƒ˜í”Œì½”ë“œë¡œ ì„¤ëª…ì„ ìœ„í•´ ë§Œë“¤ì–´ì§„ ì½”ë“œì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ì‚¬ìš©í•œë‹¤ëŠ” ìƒê°ë³´ë‹¤ëŠ” ì´ëŸ° ì°¨ì´ì ì´ ìˆêµ¬ë‚˜ë¥¼ ì´í•´ì‹œí‚¤ëŠ”ë° ì§‘ì¤‘ë˜ì–´ ìˆë‹¤ê³  í•˜ì…¨ë‹¤.<br>ì§ˆë¬¸ í•˜ë‚˜ì—ì„œ ì‹œì‘ëœ íŠ¹ë³„ ê³¼ì™¸ì— ëŒ€í•œ <a href=https://github.com/devHyeon0312>devHyeon</a>ë‹˜ì˜ ë…¸ê³ ì— ê°ì‚¬ë¥¼ í‘œí•©ë‹ˆë‹¤.ğŸ˜†</p><h4 id=ì§ˆë¬¸>ì§ˆë¬¸</h4><p><em>mvvmì€ 1:n ì˜ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆë‹¤ê³  í•˜ëŠ”ë° ì˜ˆì œëŠ” ë‹¤ 1:1ë¡œ ë˜ì–´ìˆë‹¤. mvpì™€ì˜ ì°¨ì´ëŠ” viewmodelì´ viewë¥¼ ëª¨ë¥¸ë‹¤ëŠ” ì´ìœ  ì¸ê°€?</em></p><h2 id=mvp>MVP</h2><p>view â†’ presenter â†’ model â†’ presenter â†’ view</p><p>ìˆœì„œë¡œ ì´ë²¤íŠ¸ ë°œìƒ í›„ ë°ì´í„° ì´ë™ì´ ì¼ì–´ë‚˜ëŠ”ë°, viewê°€ presenterì— ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ presenterê³¼ modelì—ì„œ ë„˜ì–´ì˜¨ ê°’ì„ viewì—ê²Œ ì „ë‹¬ì„ í•´ì£¼ëŠ” í˜•ì‹ì´ë‹¤.<br>ê·¸ë˜ì„œ presenterëŠ” ì–´ëŠ viewë¡œ ê°€ì•¼í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ì•¼ í•˜ê¸°ë•Œë¬¸ì—, viewëŠ” ì–´ëŠ presenterì— ì´ë²¤íŠ¸(ë°ì´í„°)ë¥¼ ìš”ì²­í•´ì•¼ í• ì§€ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— viewì™€ presenterëŠ” ì„œë¡œë¥¼ ì•Œì•„ì•¼í•œë‹¤. â†’ 1:1 ê´€ê³„ì˜ í˜•ì„±<br>ì—¬ê¸°ì„œ presenterëŠ” í•„ìš”í•œ ë¡œì§ë³„ ì—¬ëŸ¬ê°œì˜ modelì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. (ì„œë²„ ë°ì´í„°, ë¡œì»¬ ë°ì´í„° ë“±ì˜ ê¸°ëŠ¥ì„ ê°–ëŠ”ê²ƒë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.)</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>MainPresenter</span> {
    <span style=color:#6ab825;font-weight:700>private</span> <span style=color:#6ab825;font-weight:700>final</span> String TAG = MainPresenter.<span style=color:#bbb>class</span>.<span style=color:#bbb>getSimpleName</span>();

    <span style=color:#6ab825;font-weight:700>private</span> MainView mainView;
    <span style=color:#6ab825;font-weight:700>private</span> CalcModel calcModel;
    <span style=color:#6ab825;font-weight:700>private</span> MainModel mainModel;

    MainPresenter(MainView mainView) {
        <span style=color:#6ab825;font-weight:700>this</span>.<span style=color:#bbb>mainView</span>  = mainView;
        <span style=color:#6ab825;font-weight:700>this</span>.<span style=color:#bbb>calcModel</span> = <span style=color:#6ab825;font-weight:700>new</span> CalcModel();
        <span style=color:#6ab825;font-weight:700>this</span>.<span style=color:#bbb>mainModel</span> = <span style=color:#6ab825;font-weight:700>new</span> MainModel();
    }
</code></pre></div><p>ì˜ˆì œì˜ ëª¨ë¸ì€ mainModelê³¼ calcModelë¡œ ë‚˜ë‰˜ëŠ”ë° mainì—ì„œë§Œ í•„ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼, calc ë¡œì§ì„ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ ëª¨ë¸ì„ ì¡ì•„ë‘ì—ˆë‹¤.<br>presenterì˜ ìƒì„±ìì—ì„œ ì—°ê²°ëœ viewë¥¼ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#999;font-style:italic>//MainPresenter ë‚´ë¶€ ì½”ë“œ ì¤‘
</span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>onItemClick</span>(String item) {
        <span style=color:#6ab825;font-weight:700>if</span> (mainView != <span style=color:#6ab825;font-weight:700>null</span>) {
            CalcLogic(item);
            mainView.<span style=color:#bbb>setInputData</span>(calcModel.<span style=color:#bbb>getInputData</span>());
            mainView.<span style=color:#bbb>setResultData</span>(calcModel.<span style=color:#bbb>getOutputData</span>());
        }
    }
</code></pre></div><p>ì•ì„œ ë§í–ˆë“¯ì´ presenterê°€ viewì—ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì£¼ê¸° ë•Œë¬¸ì— presenter ë‚´ë¶€ì—ì„œ viewì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ calcModelì—ì„œ ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#999;font-style:italic>//MainActivityì˜ ë‚´ë¶€ ì½”ë“œ ì¤‘
</span><span style=color:#999;font-style:italic></span><span style=color:orange>@Override</span>
<span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setInputData</span>(String inputData) {
    <span style=color:#999;font-style:italic>//viewê°€ ìµœì¢…ì ìœ¼ë¡œ ê·¸ë¦´ì§€ ë§ì§€ë¥¼ ê²°ì •í•œë‹¤.
</span><span style=color:#999;font-style:italic></span>    xml.<span style=color:#bbb>tvInputData</span>.<span style=color:#bbb>setText</span>(inputData);
}
</code></pre></div><p><strong>ê²°êµ­ ë°›ì€ ë°ì´í„°ë¥¼ í™”ë©´ì— ê·¸ë¦´ì§€ ë§ì§€ ê²°ì •í•˜ëŠ” ê²ƒì€ Viewì˜ ì—­í• </strong>ì´ê¸° ë•Œë¬¸ì— setTextê°™ì€ ì½”ë“œê°€ ì—†ë‹¤ë©´ ë°ì´í„°ê°€ ë„˜ì–´ì™€ë„ í™”ë©´ì— ë³´ì´ì§€ ì•Šê²Œ ëœë‹¤.</p><p><em>ë§Œì•½ í™”ë©´ì—ì„œ ì‹œê°„í‘œì‹œë¥¼ ì—†ì• ë ¤ í•  ë•Œ ì–´ë–¤ì¼ì´ ì—°ì‡„ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ”ì§€ ì•Œì•„ë³´ì.</em></p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>interface</span> <span style=color:#447fcf;text-decoration:underline>MainView</span> {

    <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setInputData</span>(String inputData);

    <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setResultData</span>(String resultData);

    <span style=color:#999;font-style:italic>//void setTime(String time);
</span><span style=color:#999;font-style:italic></span>}
</code></pre></div><p>ë¨¼ì € MainView ì¸í„°í˜ì´ìŠ¤ì—ì„œ setTime ë©”ì„œë“œë¥¼ ì£¼ì„ ì²˜ë¦¬ í–ˆë‹¤.</p><p><img src=/images/post/20201124_01.png alt></p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#999;font-style:italic>//    @Override
</span><span style=color:#999;font-style:italic>//    public void setTime(String time) {
</span><span style=color:#999;font-style:italic>//        xml.tvTime.setText(time);
</span><span style=color:#999;font-style:italic>//    }
</span></code></pre></div><p>ê·¸ì— ë”°ë¼ MainActivityì˜ ì˜¤ë²„ë¼ì´ë”©í•œ setTime ë©”ì„œë“œê°€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. ì´ê²ƒë„ ì£¼ì„ ì²˜ë¦¬ë¥¼ í•´ì£¼ì.</p><p><img src=/images/post/20201124_02.png alt></p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:orange>@SuppressLint</span>(<span style=color:#ed9d13>&#34;DefaultLocale&#34;</span>)
    <span style=color:#6ab825;font-weight:700>private</span> <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>TimeLogic</span>() {
        Calendar calendar = Calendar.<span style=color:#bbb>getInstance</span>(); <span style=color:#999;font-style:italic>// ì¹¼ë Œë‹¤ ë³€ìˆ˜
</span><span style=color:#999;font-style:italic></span>        <span style=color:#6ab825;font-weight:700>int</span> year = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>YEAR</span>);
        <span style=color:#6ab825;font-weight:700>int</span> month = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>MONTH</span>);
        <span style=color:#6ab825;font-weight:700>int</span> day = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>DAY_OF_MONTH</span>);
        <span style=color:#6ab825;font-weight:700>int</span> hour = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>HOUR_OF_DAY</span>);
        <span style=color:#6ab825;font-weight:700>int</span> minute = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>MINUTE</span>);
        <span style=color:#6ab825;font-weight:700>int</span> second = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>SECOND</span>);
        mainModel.<span style=color:#bbb>setNowTime</span>(String.<span style=color:#bbb>format</span>(<span style=color:#ed9d13>&#34;%d.%d.%d %dì‹œ %dë¶„ %dì´ˆ&#34;</span>,year,month,day,hour,minute,second));
<span style=color:#999;font-style:italic>//      mainView.setTime(mainModel.getNowTime());
</span><span style=color:#999;font-style:italic></span>    }
</code></pre></div><p>MainPresenterì—ì„œ ì‚¬ìš©í•˜ë˜ mainViewì˜ setTimeë„ ì—ëŸ¬ê°€ ëœ¬ë‹¤. ì´ê²ƒë„ ì£¼ì„ì²˜ë¦¬ë¥¼ í•´ì£¼ì—ˆë‹¤.<br>í™”ë©´ì—ì„œ ì•ˆë³´ì´ê²ŒëŠ” í–ˆìœ¼ë‹ˆ ê¸°ëŠ¥ ìì²´ë¥¼ ë¹¼ë³´ì!<br>MainActivityì—ì„œ setTimer() ë¥¼ ì§€ìš°ê³ ,<br>MainPresenterì—ì„œ getTime()ì„ ì§€ìš°ê³ , TimeLogic()ì„ ì§€ìš°ê³ ,<br>MainModelì—ì„œ nowTime ë³€ìˆ˜ë¥¼ ì§€ìš°ë©´ ëœë‹¤.</p><p>ë¶„ëª… ê³„ì‚°ê¸° ê¸°ëŠ¥ê³¼ëŠ” ë¶„ë¦¬ëœ ê¸°ëŠ¥ì„ì—ë„ ê¸°ëŠ¥ í•˜ë‚˜ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” Viewì™€ Presenter, Modelì„ ëª¨ë‘ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ì¼ì´ ë°œìƒí•œë‹¤.</p><p>ê·¸ëŸ¼ MVVMì˜ ê²½ìš°ëŠ” ì–´ë–¨ê¹Œ?</p><h2 id=mvvm>MVVM</h2><p><img src=/images/post/20201124_03.png alt>
<img src=/images/post/20201124_04.png alt></p><p>ìš°ì„  íŒ¨í‚¤ì§€ì™€ êµ¬ì¡°ì¸ë°, MVPì™€ MVVMì˜ ë‹¤ë¥¸ì ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ êµ¬ì¡°ë¥¼ ê±°ì˜ ë™ì¼í•˜ê²Œ ë§ì¶˜ ìƒíƒœì´ë‹¤.<br>ì¡°ê¸ˆ ë‹¤ë¥¸ì ì—ì„œ VMì˜ íŠ¹ì§•ì´ ë“œëŸ¬ë‚œë‹¤.<br>MVPì˜ ê²½ìš° viewë§ˆë‹¤ Presenterê°€ ìˆëŠ”ê²ƒì„ ë³¼ìˆ˜ ìˆë‹¤.<br>MVVMì˜ ê²½ìš° Mainê³¼ Usageì¤‘ Mainì—ë§Œ MainViewModelì´ ì¡´ì¬í•˜ëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p><p><em>ì ì‹œ ë·°ëª¨ë¸ì´ ì–´ë–¤ ê²½ìš°ì— 1:1ë¡œ viewì™€ viewModelì„ ê°–ëŠ”ì§€, ì–´ë–¤ ê²½ìš°ì— 1:Nì˜ ê´€ê³„ë¥¼ ê°–ëŠ”ì§€ ì•Œì•„ë³´ì.</em></p><p><img src=/images/post/20201124_05.png alt></p><p>ìƒ˜í”Œì•±ì˜ ì‹¤í–‰í™”ë©´ì¸ë°, í‘œì‹œí•œ ê²ƒ ì²˜ëŸ¼ 1ë²ˆ ê¸°ëŠ¥ê³¼ 2ë²ˆ ê¸°ëŠ¥ì€ ì™„ì „íˆ ë³„ê°œì˜ ë¡œì§ì´ë‹¤. ì´ëŸ° ê²½ìš° ê°ê°ì˜ ê¸°ëŠ¥ì— ë”°ë¼ ViewModelì´ 2ê°œê°€ í•œ ê°œì˜ viewì•ˆì— ë“¤ì–´ê°€ê²Œ ëœë‹¤.<br>1ë²ˆ ê¸°ëŠ¥ì€ MainViewModelì˜ ê¸°ëŠ¥ì´ê³  â†’ MainActivityì—ì„œë§Œ ì“°ì´ëŠ” ê¸°ëŠ¥ â†’ 1:1ë¡œ ë§¤ì¹­<br>2ë²ˆ ê¸°ëŠ¥ì€ CalcViewModelì˜ ê¸°ëŠ¥ì´ë‹¤. â†’ ì—¬ëŸ¬êµ°ë°ì—ì„œ ì“°ì´ëŠ” ê¸°ëŠ¥ â†’ 1:nìœ¼ë¡œ ë§¤ì¹­ê°€ëŠ¥</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>MainActivity</span> <span style=color:#6ab825;font-weight:700>extends</span> BaseActivity&lt;ActivityMainBinding&gt; <span style=color:#6ab825;font-weight:700>implements</span> MainView {
    <span style=color:#6ab825;font-weight:700>private</span> <span style=color:#6ab825;font-weight:700>final</span> String TAG = MainActivity.<span style=color:#bbb>class</span>.<span style=color:#bbb>getSimpleName</span>();
    <span style=color:#6ab825;font-weight:700>private</span> <span style=color:#6ab825;font-weight:700>final</span> <span style=color:#6ab825;font-weight:700>int</span> TIME_TICK = 1000;

    <span style=color:#6ab825;font-weight:700>private</span> CalcViewModel calcViewModel;
    <span style=color:#6ab825;font-weight:700>private</span> MainViewModel mainViewModel;
</code></pre></div><p>ë”°ë¼ì„œ MainActivity(view)ëŠ” ë‘ê°œì˜ ViewModelì„ ê°–ê²Œ ëœë‹¤.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>UsageActivity</span> <span style=color:#6ab825;font-weight:700>extends</span> BaseActivity&lt;ActivityUsageBinding&gt; <span style=color:#6ab825;font-weight:700>implements</span> UsageView {
    <span style=color:#6ab825;font-weight:700>private</span> <span style=color:#6ab825;font-weight:700>final</span> String TAG = UsageActivity.<span style=color:#bbb>class</span>.<span style=color:#bbb>getSimpleName</span>();

    <span style=color:#6ab825;font-weight:700>private</span> CalcViewModel calcViewModel;

    <span style=color:#6ab825;font-weight:700>private</span> UsageAdapter usageAdapter;
</code></pre></div><p>UasgeActivtyì˜ ê²½ìš° Usageë§Œì˜ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ì—†ì´ Calcì˜ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ë§Œ ë³´ì—¬ì£¼ê¸° ë•Œë¬¸ì— ë”°ë¡œ 1:1ë¡œ ë§¤ì¹­ëœ ViewModel ì—†ì´ CalcViewModelì„ ì‚¬ìš©í•œë‹¤.<br>ë”°ë¼ì„œ CalcViewModelì€ 1:Nì˜ ê´€ê³„ë¥¼ í˜•ì„±í•˜ê²Œ ëœë‹¤.
<em>ë¬¼ë¡  ìœ„ì˜ ì˜ˆì œ ìì²´ê°€ ì´ëŸ° ê´€ê³„ë“¤ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì§œì—¬ì§„ ê·¹ë‹¨ì ì¸ ì˜ˆì œë¼ëŠ” ê²ƒì„ ì°¸ê³ í•´ì•¼í•œë‹¤.</em></p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>MainViewModel</span> <span style=color:#6ab825;font-weight:700>extends</span> ViewModel {
    <span style=color:#6ab825;font-weight:700>private</span> MutableLiveData&lt;MainModel&gt; mainModel = <span style=color:#6ab825;font-weight:700>new</span> MutableLiveData&lt;&gt;();

    <span style=color:#6ab825;font-weight:700>public</span> LiveData&lt;MainModel&gt; <span style=color:#447fcf>getMainModel</span>() {
        <span style=color:#6ab825;font-weight:700>if</span> (mainModel == <span style=color:#6ab825;font-weight:700>null</span>) {
            mainModel = <span style=color:#6ab825;font-weight:700>new</span> MutableLiveData&lt;MainModel&gt;();
        }
        <span style=color:#6ab825;font-weight:700>return</span> mainModel;
    }

    <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setTime</span>() {
        mainModel.<span style=color:#bbb>setValue</span>(<span style=color:#6ab825;font-weight:700>new</span> MainModel(TimeLogic()));
    }

    <span style=color:orange>@SuppressLint</span>(<span style=color:#ed9d13>&#34;DefaultLocale&#34;</span>)
    <span style=color:#6ab825;font-weight:700>private</span> String <span style=color:#447fcf>TimeLogic</span>() {
        Calendar calendar = Calendar.<span style=color:#bbb>getInstance</span>(); <span style=color:#999;font-style:italic>// ì¹¼ë Œë‹¤ ë³€ìˆ˜
</span><span style=color:#999;font-style:italic></span>        <span style=color:#6ab825;font-weight:700>int</span> year = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>YEAR</span>);
        <span style=color:#6ab825;font-weight:700>int</span> month = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>MONTH</span>);
        <span style=color:#6ab825;font-weight:700>int</span> day = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>DAY_OF_MONTH</span>);
        <span style=color:#6ab825;font-weight:700>int</span> hour = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>HOUR_OF_DAY</span>);
        <span style=color:#6ab825;font-weight:700>int</span> minute = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>MINUTE</span>);
        <span style=color:#6ab825;font-weight:700>int</span> second = calendar.<span style=color:#bbb>get</span>(Calendar.<span style=color:#bbb>SECOND</span>);
        <span style=color:#6ab825;font-weight:700>return</span> String.<span style=color:#bbb>format</span>(<span style=color:#ed9d13>&#34;%d.%d.%d %dì‹œ %dë¶„ %dì´ˆ&#34;</span>,year,month,day,hour,minute,second);
    }
}
</code></pre></div><p>ìš°ì„  MainViewModelì„ ë³´ë©´ viewmodel ë‚´ì—ì„œ viewë¥¼ ì „í˜€ ëª¨ë¥´ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#999;font-style:italic>//MainActivity ë‚´ë¶€ ì½”ë“œ ì¤‘
</span><span style=color:#999;font-style:italic></span><span style=color:orange>@Override</span>
<span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setMainViewModel</span>() {
    mainViewModel = <span style=color:#6ab825;font-weight:700>new</span> ViewModelProvider(<span style=color:#6ab825;font-weight:700>this</span>).<span style=color:#bbb>get</span>(MainViewModel.<span style=color:#bbb>class</span>);
    mainViewModel.<span style=color:#bbb>getMainModel</span>().<span style=color:#bbb>observe</span>(<span style=color:#6ab825;font-weight:700>this</span>, mainModel -&gt; {
        xml.<span style=color:#bbb>tvTime</span>.<span style=color:#bbb>setText</span>(mainModel.<span style=color:#bbb>getNowTime</span>());
    });
}
</code></pre></div><p>MainActivityì—ì„œ viewModelì„ observe í•´ì„œ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.</p><p><em>MVPì™€ ë§ˆì°¬ê°€ì§€ë¡œ MainActivityì—ì„œ ì‹œê³„ ê¸°ëŠ¥ì„ ëº€ë‹¤ê³  ê°€ì •í•´ë³´ì.</em></p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>interface</span> <span style=color:#447fcf;text-decoration:underline>MainView</span> {

    <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setCalcViewModel</span>();

    <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setMainViewModel</span>();

    <span style=color:#999;font-style:italic>//void setTime();
</span><span style=color:#999;font-style:italic></span>}
</code></pre></div><p>MainViewì—ì„œ setTime()ì„ ë§ˆì°¬ê°€ì§€ë¡œ ì£¼ì„ì²˜ë¦¬í•˜ê³ </p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#999;font-style:italic>//    @Override
</span><span style=color:#999;font-style:italic>//    public void setTime() {
</span><span style=color:#999;font-style:italic>//        Thread thread = new Thread() {
</span><span style=color:#999;font-style:italic>//            @Override
</span><span style=color:#999;font-style:italic>//            public void run() {
</span><span style=color:#999;font-style:italic>//                while (!isInterrupted()) {
</span><span style=color:#999;font-style:italic>//                    runOnUiThread(() -&gt; mainViewModel.setTime());
</span><span style=color:#999;font-style:italic>//                    try {
</span><span style=color:#999;font-style:italic>//                        Thread.sleep(TIME_TICK);
</span><span style=color:#999;font-style:italic>//                    } catch (InterruptedException e) {
</span><span style=color:#999;font-style:italic>//                        e.printStackTrace();
</span><span style=color:#999;font-style:italic>//                    }
</span><span style=color:#999;font-style:italic>//                }
</span><span style=color:#999;font-style:italic>//            }
</span><span style=color:#999;font-style:italic>//        };
</span><span style=color:#999;font-style:italic>//        thread.start();
</span><span style=color:#999;font-style:italic>//    }
</span></code></pre></div><p>MainActivityì—ì„œ ì—ëŸ¬ê°€ ëœ¨ëŠ” ì˜¤ë²„ë¼ì´ë”© setTimeë„ ì£¼ì„ì²˜ë¦¬í•œë‹¤.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:orange>@Override</span>
<span style=color:#6ab825;font-weight:700>public</span> <span style=color:#6ab825;font-weight:700>void</span> <span style=color:#447fcf>setMainViewModel</span>() {
    mainViewModel = <span style=color:#6ab825;font-weight:700>new</span> ViewModelProvider(<span style=color:#6ab825;font-weight:700>this</span>).<span style=color:#bbb>get</span>(MainViewModel.<span style=color:#bbb>class</span>);
    mainViewModel.<span style=color:#bbb>getMainModel</span>().<span style=color:#bbb>observe</span>(<span style=color:#6ab825;font-weight:700>this</span>, mainModel -&gt; {
       <span style=color:#999;font-style:italic>// xml.tvTime.setText(mainModel.getNowTime());
</span><span style=color:#999;font-style:italic></span>    });
}
</code></pre></div><p>MainActivityì—ì„œ setTextë¡œ ì‹œê°„ì„ ë³´ì—¬ì£¼ë˜ ë¶€ë¶„ë„ ì£¼ì„ì²˜ë¦¬í–ˆë‹¤.</p><p><img src=/images/post/20201124_06.png alt>
MainViewModelì—ì„  ë”°ë¡œ ì—ëŸ¬ë°œìƒ ì—†ì´ setTime ë©”ì„œë“œê°€ ì‚¬ìš©ë˜ëŠ” ê³³ì´ ì—†ë‹¤ê³  ë³´ì¼ ë¿ì´ë‹¤.<br>ì´ì²˜ëŸ¼ MVVMì—ì„œ ê¸°ëŠ¥ì„ ìˆ˜ì •í• ë• Viewì™€ ViewModel ëª¨ë‘ ìˆ˜ì •ì´ í•„ìš”í•œ ê²ƒì´ ì•„ë‹ˆë¼ viewì—ì„œë§Œ ìˆ˜ì •í•´ì£¼ë©´ ëœë‹¤. â†’ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•˜ë‹¤.</p><p>ê·¸ëŸ¼ ì•„ì˜ˆ ê¸°ëŠ¥ì„ ì™„ì „íˆ ì‚­ì œí•˜ë ¤ë©´?</p><p>ViewModelì—ì„œ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì‚­ì œí•˜ë ¤ë©´ í•´ë‹¹ ê¸°ëŠ¥ì´ ì–´ë””ì—ì„œ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€ ì •í™•íˆ íŒŒì•…í•œ í›„ ìˆ˜ì •í•´ì•¼í•œë‹¤. ìœ„ì—ì„œ ì„¤ëª…í–ˆë“¯ 1:n ê´€ê³„ë„ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ viewì—ì„œ ì‚¬ìš©ë˜ê³  ìˆëŠ” ê¸°ëŠ¥ì´ë¼ë©´ ë§ì€ ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.</p><p>ê·¸ë˜ì„œ ViewModel ë‚´ì—ì„œ ê¸°ëŠ¥ ìˆ˜ì •ì€ ìµœì†Œí•œìœ¼ë¡œ í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤.<br>ì´ëŠ” ê³§ ì• ì´ˆì— êµ¬ì¡°ë¥¼ ì¡ê³  ì„¤ê³„í•  ë•Œ ìˆ˜ì •ì´ ìµœëŒ€í•œ ì—†ë„ë¡ ì •í•˜ê³  ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤.<br>ê·¸ë˜ì„œ MVVMì€ í•œë²ˆ ë§Œë“¤ì–´ ë‘ë©´ ìœ ì§€ë³´ìˆ˜ì—ì„œ íƒì›”í•˜ì§€ë§Œ, MVVMì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œë¥¼ ì£¼ì˜í•´ì•¼í•œë‹¤.</p><ol><li>ì„¤ê³„ë‹¨ê³„ì—ì„œ ViewModelì„ ìµœëŒ€í•œ ì™„ì„±í˜•ì˜ ì„¤ê³„ë¥¼ ìƒê°í•´ì•¼í•œë‹¤. (ì¶”í›„ ìˆ˜ì •ì„ ìµœì†Œí•œìœ¼ë¡œ í•˜ê¸° ìœ„í•´)</li><li>1ë²ˆì˜ ì´ìœ ë¡œ ì‹œê°„ì´ ì„¤ê³„ì™€ ì´ˆê¸° ì‘ì—…ì—ì„œ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦°ë‹¤.</li><li>ì‘ì€ ê¸°ëŠ¥ì— ëŒ€í•´ MVVMì„ ì‚¬ìš©í•˜ë ¤í•˜ë©´ ì˜¤íˆë ¤ ë¶ˆí•„ìš”í•œ ì‹œê°„ê³¼ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤.</li></ol><p>ë³´í†µ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ë¶€ë¶„ì„ í•˜ë‚˜ì˜ íŒ¨í„´ìœ¼ë¡œ ë§Œë“¤ì§€ëŠ” ì•ŠëŠ”ë‹¤ê³  í•œë‹¤. MVVMì„ ì‚¬ìš©í•˜ë”ë¼ë„ ë§¨ì²˜ìŒ ë³´ì—¬ì£¼ëŠ” ìŠ¤í”Œë˜ì‰¬ í™”ë©´ ê°™ì€ ê²½ìš°ì—” ê¸°ëŠ¥ë„ í¬ê²Œ ì—†ëŠ”ë° VMì„ ì‚¬ìš©í•˜ë©´ í° ì˜ë¯¸ê°€ ì—†ì´ ì½”ë“œë§Œ ë“¤ì–´ë‚˜ê¸° ë•Œë¬¸ì— mvpë‚˜ ê·¸ëƒ¥ ì•¡í‹°ë¹„í‹° ë‚´ì—ì„œ ëë‚´ê¸°ë„ í•œë‹¤ê³  í•œë‹¤.</p><p>ì¶”ê°€ë¡œ
ìœ„ì˜ viewmodelì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œë¡œ ë‚˜íƒ€ë‚ ë•Œ ê¼­ ì§€ì›Œì•¼ í•˜ëŠ”ê°€? ì— ëŒ€í•œ ë‚´ìš©ì¸ë° ì˜¤íˆë ¤ ì§€ìš°ì§€ ì•ŠëŠ”ìª½ì´ ë‚œë…í™”ì—ëŠ” ë„ì›€ì´ ëœë‹¤.<br>ë³´ì•ˆì´ ì¤‘ìš”í•˜ê±°ë‚˜ í¬ê¸°ê°€ í° í”„ë¡œì íŠ¸ì˜ ê²½ìš° ì¼ë¶€ëŸ¬ ì“¸ë•Œì—†ëŠ” ì½”ë“œë“¤ì„ ê°™ì´ ë„£ì–´ì„œ ë‚œë…í™”ë¥¼ í’€ë•Œ ë” ì–´ë µê²Œ ë§Œë“¤ê¸°ë„ í•œë‹¤ê³ .<br>íŠ¹íˆ ë¬¸ìì—´ì˜ ê²½ìš° ë‚œë…í™”ê°€ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— a=&ldquo;h&rdquo; ì²˜ëŸ¼ í•œê¸€ìì”© ë”°ë¡œ string ê°’ì„ ì¤˜ì„œ ì§„ì§œ ë‚´ìš©ì„ ë”°ë¼ê°€ê¸° ê·€ì°®ê²Œ ë§Œë“¤ê¸°ë„ í•œë‹¤ê³ í•œë‹¤.</p><h4 id=sampleapp-code>SampleApp Code</h4><p><a href=https://github.com/handnew04/mvp-mvvm>https://github.com/handnew04/mvp-mvvm</a></p></section></article><script src=https://utteranc.es/client.js repo=handnew04/handnew04.github.io issue-term=title theme=github-light crossorigin=anonymous async></script><footer id=footer><p class=small>Â© Yujung 2020 <i class="fa fa-heart" aria-hidden=true></i></p><p class=small><a href=https://handnew04.github.io/index.xml type=application/rss+xml target=_blank><i class="fas fa-rss"></i>RSS</a>
/ Powered by <a href=http://www.gohugo.io/>Hugo</a> Theme By <a href=https://github.com/nodejh/hugo-theme-cactus-plus>nodejh</a></p></footer></section><script src=https://handnew04.github.io/js/jquery-3.3.1.min.js></script><script src=https://handnew04.github.io/js/main.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-137481057-1','auto');ga('send','pageview');}</script></body></html>